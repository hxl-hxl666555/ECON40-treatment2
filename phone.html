<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Phone Purchase</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 80px;
    }

    .wrapper {
      max-width: 1200px;
      margin: 0 auto;
      margin-left: 300px;
    }

    .container {
      display: flex;
      gap: 40px;
    }

    .options {
      max-width: 500px;
    }

    button {
      margin: 5px;
      padding: 10px 15px;
      cursor: pointer;
      border: 1px solid #ccc;
      border-radius: 6px;
      background-color: #fff;
      font-size: 14px;
    }

    button.selected {
      border: 2px solid #0070f3;
      background-color: #e0f0ff;
    }

    img {
      max-width: 400px;
      border-radius: 10px;
    }

    .price {
      font-size: 24px;
      margin-bottom: 20px;
      color: rgb(184, 57, 38);
    }

    .buy-button {
      margin-top: 20px;
      padding: 20px 40px;
      font-size: 18px;
      font-weight: bold;
      border: none;
      background-color: #0070f3;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }

    .buy-button:hover {
      background-color: #0057c2;
    }

    #warning {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: rgba(255, 0, 0, 0.9);
      color: white;
      padding: 20px 40px;
      border-radius: 10px;
      font-size: 18px;
      font-weight: bold;
      z-index: 1000;
      text-align: center;
    }
  </style>
</head>
<body>

  <div class="wrapper">
    <h1>Phone, US Version, 128GB memory</h1>

    <div class="container">
      <div style="text-align: center;">
        <img id="product-image" src="" alt="Phone Image">
        <button class="buy-button" onclick="goNext()">Buy Now</button>
      </div>

      <div class="options">
        <div class="price">Total Price: $<span id="total-price">499</span></div>
        <p><strong>Product features:</strong> 128GB memory, iOS, 8GB RAM, Intel Core 5 @ 2.2 GHz</p>

        <h3>Select Color:</h3>
        <div id="colors">
          <button class="color-option" data-color="black" data-price="0">Black (+$0)</button>
          <button class="color-option" data-color="pink" data-price="0">Pink (+$0)</button>
          <button class="color-option" data-color="teal" data-price="50">Teal (+$50)</button>
          <button class="color-option" data-color="white" data-price="50">White (+$50)</button>
          <button class="color-option" data-color="ultramarine" data-price="50">Ultramarine (+$50)</button>
        </div>

        <h3>Screen Size:</h3>
        <div id="upgrade">
          <button class="upgrade" data-price="0">Standard Screen (+$0)</button>
          <button class="upgrade" data-price="99">Upgrade to Large Screen (+$99)</button>
        </div>

        <h3>Warranty:</h3>
        <div id="warranty">
          <button class="warranty" data-price="0">No Warranty (+$0)</button>
          <button class="warranty" data-price="100">Yes (+$100)</button>
        </div>
      </div>
    </div>
  </div>

  <div id="warning">Please make a choice for each option</div>

  <script>
    const basePrice = 499;
    let selectedColorPrice = 0;
    let selectedUpgradePrice = 0;
    let selectedWarrantyPrice = 0;

    function updateTotalPrice() {
      const total = basePrice + selectedColorPrice + selectedUpgradePrice + selectedWarrantyPrice;
      document.getElementById("total-price").textContent = total;
    }

    function goNext() {
      const colorSelected = document.querySelector('.color-option.selected');
      const upgradeSelected = document.querySelector('.upgrade.selected');
      const warrantySelected = document.querySelector('.warranty.selected');

      if (!colorSelected || !upgradeSelected || !warrantySelected) {
        showWarning();
        return;
      }

      const data = {
        color: colorSelected.textContent,
        upgrade: upgradeSelected.textContent,
        warranty: warrantySelected.textContent
      };

      localStorage.setItem("phone", JSON.stringify(data));

      window.location.href = 'end.html';
    }

    function showWarning() {
      const warning = document.getElementById('warning');
      warning.style.display = 'block';
      setTimeout(() => {
        warning.style.display = 'none';
      }, 2000);
    }

    window.onload = function () {
      // 默认颜色：white
      const defaultColorButton = document.querySelector('.color-option[data-color="black"]');
      if (defaultColorButton) {
        defaultColorButton.classList.add('selected');
        document.getElementById('product-image').src = `images/black.jpg`;
        selectedColorPrice = parseInt(defaultColorButton.getAttribute('data-price'));
      }

      // 默认升级：Upgrade to Large Screen (+$99)
      const defaultUpgradeButton = document.querySelector('.upgrade[data-price="0"]');
      if (defaultUpgradeButton) {
        defaultUpgradeButton.classList.add('selected');
        selectedUpgradePrice = parseInt(defaultUpgradeButton.getAttribute('data-price'));
      }

      // 默认保修：Yes (+$100)
      const defaultWarrantyButton = document.querySelector('.warranty[data-price="0"]');
      if (defaultWarrantyButton) {
        defaultWarrantyButton.classList.add('selected');
        selectedWarrantyPrice = parseInt(defaultWarrantyButton.getAttribute('data-price'));
      }

      updateTotalPrice();
    };

    document.querySelectorAll('.color-option').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.color-option').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        selectedColorPrice = parseInt(btn.getAttribute('data-price'));
        const color = btn.getAttribute('data-color');
        document.getElementById('product-image').src = `images/${color}.jpg`;
        updateTotalPrice();
      });
    });

    document.querySelectorAll('.upgrade').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.upgrade').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        selectedUpgradePrice = parseInt(btn.getAttribute('data-price'));
        updateTotalPrice();
      });
    });

    document.querySelectorAll('.warranty').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.warranty').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        selectedWarrantyPrice = parseInt(btn.getAttribute('data-price'));
        updateTotalPrice();
      });
    });
  </script>

</body>
</html>
